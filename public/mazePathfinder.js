!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="./public/",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var s=i(1),a=n(s);new a["default"]({element:document.getElementById("container")})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(2),o=n(r),l={5:[[0,0,0,0,0],["W",0,"W","W",0],[0,0,0,0,0],[0,"W","W","W","W"],[0,0,0,0,0]],10:[[0,0,0,0,0,0,0,0,0,0],["W","W",0,"W","W","W","W","W","W",0],[0,0,0,0,"W",0,0,0,0,0],[0,0,0,0,"W",0,"W","W","W","W"],[0,0,0,0,"W",0,"W",0,0,0],[0,0,0,0,"W",0,"W",0,0,0],[0,0,0,0,"W",0,"W",0,0,0],[0,0,0,0,"W",0,"W",0,"W","W"],["W","W","W","W","W",0,"W",0,"W",0],[0,0,0,0,0,0,0,0,0,0]],20:[[0,0,0,"W",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,"W",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,"W",0,"W",0,0,0,0,"W","W",0,0,"W",0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,"W",0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,"W",0,0,"W",0,0,0,0,0,0,0],[0,0,0,0,0,"W",0,0,0,0,0,0,0,"W",0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,"W","W",0,0,0,"W",0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,"W",0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,"W",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["W","W","W",0,"W","W","W","W","W","W","W","W","W","W","W","W","W","W","W","W"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,"W",0,0,0,0,0,0,0,0,0,0],[0,0,0,"W","W","W",0,0,0,0,"W",0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},h=function(){function t(e){s(this,t),this._el=e.element,this._sizeSelector=this._el.querySelector('[data-selector="sizeSelector"]'),this._sizeSelector.addEventListener("change",this._createMaze.bind(this)),this._neighbourhoodSelector=this._el.querySelector('[data-selector="neighbourhoodSelector"]'),this._nextBtn=this._el.querySelector('[data-selector="nextBtn"]'),this._nextBtn.addEventListener("click",this._next.bind(this)),this._goBtn=this._el.querySelector('[data-selector="goBtn"]'),this._goBtn.addEventListener("click",this._go.bind(this)),this._mazePlace=this._el.querySelector('[data-component="mazePlace"]'),this._mazePlace.addEventListener("backTraceStart",this._backTraceStart.bind(this)),this._mazePlace.addEventListener("finish",this._finish.bind(this)),this._breadcrumbs=this._el.querySelector('[data-selector="breadcrumbs"]'),this._stage=t.STAGES.CHOOSING_SIZE}return a(t,[{key:"_createMaze",value:function(){var e=parseInt(this._sizeSelector.options[this._sizeSelector.selectedIndex].value),i=this._neighbourhoodSelector.querySelector('input[type="checkbox"]').checked;this._clear(),e?(t._hideEl(this._neighbourhoodSelector),t._showEl(this._nextBtn),t._showEl(this._mazePlace),this._maze=new o["default"]({element:this._mazePlace,size:e,withDiagonalNeighbors:i}),this._maze.fillWithPattern(l[e]),this._stage=t.STAGES.CHANGING_MAZE):(t._hideEl(this._nextBtn),t._hideEl(this._goBtn),t._hideEl(this._mazePlace),t._showEl(this._neighbourhoodSelector),this._stage=t.STAGES.CHOOSING_SIZE),this._changeActiveStage()}},{key:"_next",value:function(){switch(this.stage){case t.STAGES.CHANGING_MAZE:this._stage=t.STAGES.CHOOSING_START_POINT,this._maze.choosePoint("start");break;case t.STAGES.CHOOSING_START_POINT:this._maze.startPoint?(this._stage=t.STAGES.CHOOSING_END_POINT,this._maze.choosePoint("end")):this._blinkCurrentStage();break;case t.STAGES.CHOOSING_END_POINT:this._maze.endPoint?(this._stage=t.STAGES.WAVE_EXPANSION,t._showEl(this._goBtn),this._maze.nextStep()):this._blinkCurrentStage();break;case t.STAGES.WAVE_EXPANSION:case t.STAGES.BACKTRACE:this._maze.nextStep()}this._changeActiveStage()}},{key:"_go",value:function(){t._hideEl(this._nextBtn),t._hideEl(this._goBtn),this._hideDetailsAboutButtons(),this._timer=setInterval(this._next.bind(this),500)}},{key:"_backTraceStart",value:function(){this._stage=t.STAGES.BACKTRACE,this._changeActiveStage()}},{key:"_finish",value:function(e){this._stage=t.STAGES.FINISH,this._timer&&clearInterval(this._timer),t._hideEl(this._nextBtn),t._hideEl(this._goBtn),this._changeActiveStage(),this._showAlgorithmResult(e.detail.message)}},{key:"_clear",value:function(){this._timer&&clearInterval(this._timer),this._maze&&(this._maze.clear(),this._maze=null),this._hideAlgorithmResult(),this._showDetailsAboutButtons()}},{key:"_blinkCurrentStage",value:function(){var t=this._breadcrumbs.querySelector(".active");t.classList.add("blinked"),setTimeout(function(){t.classList.remove("blinked")},500)}},{key:"_changeActiveStage",value:function(){this._breadcrumbs.querySelector(".active").classList.remove("active"),this._breadcrumbs.children[this.stage].classList.add("active")}},{key:"_showAlgorithmResult",value:function(e){this.stage===t.STAGES.FINISH&&e&&(this._breadcrumbs.lastElementChild.lastElementChild.innerHTML=e)}},{key:"_hideAlgorithmResult",value:function(){this._breadcrumbs.lastElementChild.lastElementChild.innerHTML=""}},{key:"_showDetailsAboutButtons",value:function(){this._breadcrumbs.children[4].lastElementChild.innerHTML="Press 'Next' to see next step, <br>or press 'Go' to see the whole algorithm",this._breadcrumbs.children[5].lastElementChild.innerHTML="Press 'Next' to see next step, <br>or press 'Go' to see the whole algorithm"}},{key:"_hideDetailsAboutButtons",value:function(){this._breadcrumbs.children[4].lastElementChild.innerHTML="",this._breadcrumbs.children[5].lastElementChild.innerHTML=""}},{key:"stage",get:function(){return this._stage}}],[{key:"_showEl",value:function(t){t.classList.remove("js-hidden")}},{key:"_hideEl",value:function(t){t.classList.add("js-hidden")}},{key:"STAGES",get:function(){return{CHOOSING_SIZE:0,CHANGING_MAZE:1,CHOOSING_START_POINT:2,CHOOSING_END_POINT:3,WAVE_EXPANSION:4,BACKTRACE:5,FINISH:6}}}]),t}();e["default"]=h},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),o=n(r);o.installMatches(),o.installClosest(),o.installCustomEvent();var l=function(){function t(e){s(this,t),this._el=e.element,this._size=e.size,this._neighborhoodCondition=e.withDiagonalNeighbors?t.NEIGHBORHOOD.ORTHO_DIAGONAL:t.NEIGHBORHOOD.ORTHOGONAL,this._renderMaze(),this._map=this._el.querySelector('[data-selector="map"]'),this._map.addEventListener("click",t._changeCell),this._startPoint=void 0,this._endPoint=void 0,this._step=void 0}return a(t,[{key:"clear",value:function(){this._el.innerHTML="",this._map=null}},{key:"fillWithPattern",value:function(e){if(!this.startPoint)for(var i=0;i<this.size;i++)for(var n=0;n<this.size;n++){var s=this._map.rows[i].cells[n];"W"===e[i][n]&&(s.dataset.info="W",t._toggleWall(s))}}},{key:"choosePoint",value:function(e){this.step||("start"===e&&(this._map.removeEventListener("click",t._changeCell),this._choosing={info:"S",toggle:t._toggleStart},this._markPoint=this._markPoint.bind(this),this._map.addEventListener("click",this._markPoint)),"end"===e&&(this._choosing={info:"E",toggle:t._toggleFinish}))}},{key:"nextStep",value:function(){var t=void 0;if(this.startPoint&&this.endPoint){if(this._step||(this._map.removeEventListener("click",this._markPoint),this.startPoint.innerHTML="0",this.endPoint.dataset.info="",this._step=1),this.endPoint.innerHTML)this._backTraceStart(),this._backTraceStep()||(t="The path was found!");else{var e=this._waveExpansionStep();e||(t="There is no path could be found!")}t&&this._finish(t)}}},{key:"cellNeighbours",value:function(t,e){for(var i=[],n=Math.max(t-1,0);n<=Math.min(t+1,this.size-1);n++)for(var s=Math.max(e-1,0);s<=Math.min(e+1,this.size-1);s++)this._neighborhoodCondition(e,t,s,n)&&i.push(this._map.rows[n].cells[s]);return i}},{key:"_markPoint",value:function(t){var e=t.target.closest("td");if(e)switch(this._choosing.point?e===this._choosing.point&&(this._choosing.point=null,e.dataset.info="",this._choosing.toggle(e)):e.dataset.info||(this._choosing.point=e,e.dataset.info=this._choosing.info,this._choosing.toggle(e)),this._choosing.info){case"S":this._startPoint=this._choosing.point;break;case"E":this._endPoint=this._choosing.point}}},{key:"_renderMaze",value:function(){for(var t='<table data-selector="map">',e=0;e<this.size;e++){t+="<tr>\n";for(var i=0;i<this.size;i++)t+="<td></td>\n";t+="</tr>"}t+="</table>",this._el.insertAdjacentHTML("beforeEnd",t)}},{key:"_waveExpansionStep",value:function(){for(var t=this._step,e=!1,i=0;i<this.size;i++)for(var n=0;n<this.size;n++){var s=this._map.rows[i].cells[n];parseInt(s.innerHTML)===t-1&&this.cellNeighbours(i,n).filter(function(t){return!t.innerHTML&&!t.dataset.info}).forEach(function(i){i.innerHTML=t,e=!0})}return this._step++,e}},{key:"_backTraceStart",value:function(){var t=new CustomEvent("backTraceStart");this._el.dispatchEvent(t)}},{key:"_backTraceStep",value:function(){this._currentCell||(this._currentCell=this.endPoint);var e=this.cellNeighbours(this._currentCell.parentNode.rowIndex,this._currentCell.cellIndex);return this._currentCell=this._nextCellWithMinSteps(this._currentCell,e),this._currentCell===this.startPoint?!1:(t._markPath(this._currentCell),!0)}},{key:"_finish",value:function(t){var e=new CustomEvent("finish",{detail:{message:t}});this._el.dispatchEvent(e)}},{key:"_nextCellWithMinSteps",value:function(t,e){return e.reduce(function(t,e){return parseInt(e.innerHTML)<parseInt(t.innerHTML)&&(t=e),t},t)}},{key:"size",get:function(){return this._size}},{key:"startPoint",get:function(){return this._startPoint}},{key:"endPoint",get:function(){return this._endPoint}},{key:"step",get:function(){return this._step}}],[{key:"_changeCell",value:function(e){var i=e.target.closest("td");i&&(i.dataset.info?i.dataset.info="":i.dataset.info="W",t._toggleWall(i))}},{key:"_toggleWall",value:function(t){t.classList.toggle("wall")}},{key:"_toggleStart",value:function(t){t.classList.toggle("start")}},{key:"_toggleFinish",value:function(t){t.classList.toggle("finish")}},{key:"_markPath",value:function(t){t.classList.add("path")}},{key:"NEIGHBORHOOD",get:function(){return{ORTHOGONAL:function(t,e,i,n){return n===e&&i!==t||n!==e&&i===t},ORTHO_DIAGONAL:function(t,e,i,n){return n!==e||i!==t}}}}]),t}();e["default"]=l},function(t,e){"use strict";function i(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)}function n(){Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null})}function s(){try{new CustomEvent("IE has CustomEvent, but doesn't support constructor")}catch(t){window.CustomEvent=function(t,e){var i;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent"),i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i},CustomEvent.prototype=Object.create(window.Event.prototype)}}Object.defineProperty(e,"__esModule",{value:!0}),e.installMatches=i,e.installClosest=n,e.installCustomEvent=s}]);
//# sourceMappingURL=mazePathfinder.js.map